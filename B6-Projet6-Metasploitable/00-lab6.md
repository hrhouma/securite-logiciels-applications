# Tbale des matières
- Étape 1 - Installation de Metasploitable3 via VAGRANT
- Étape 2 - Configuration des cartes
- Étape 3 - Ajout des machines (Ubuntu 2204, Kali- linux, Windows 10) et configuration des cartes
- Étape 4 - Pinger les machines entre elles
- Étape 5 - Démarrer Metasploitable3
---

#  1 - Étape 1 - Installation de Metasploitable3 




## Étapes d'Installation de Metasploitable3 sous Windows avec PowerShell dans WINDOWS

## 1. Installation de Chocolatey (si pas déjà installé) :

Ouvrez PowerShell en tant qu'administrateur et exécutez la commande suivante pour installer Chocolatey :

```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))
```

#### 2. Installation des outils nécessaires :

##### a. Git :

Installez Git via Chocolatey avec la commande suivante :

```powershell
choco install git -y
```

##### b. Packer :

Installez Packer via Chocolatey avec la commande suivante :

```powershell
choco install packer -y
```

##### c. Vagrant :

Téléchargez et installez la dernière version de Vagrant depuis le site officiel : [https://www.vagrantup.com/downloads](https://www.vagrantup.com/downloads).

![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/0503325f-9df8-42f1-9012-9666d360930e)

## Installez vagrant en utilisant le .msi ou .exe (next , next , next , ...)
# IMPORTANT : REDÉMARREZ LA MACHINE APRÈS AVOIR INSTALLÉ VAGRANT

## AUTRES RÉFÉRENCES UTILES pour installer VAGRANT
- https://medium.com/@cnivesh/how-to-set-up-vagrant-on-windows-3bc841ea4811
- https://developer.hashicorp.com/vagrant/install?product_intent=vagrant


#### 3. Téléchargement et configuration de Metasploitable3 :

##### a. Clonez le repository Metasploitable3 depuis GitHub :

## Créez un dossier vagrant dans Documents (sous Windows) par exemple
```powershell
git clone https://github.com/rapid7/metasploitable3.git
cd .\metasploitable3\
vagrant box add jbarnett-r7/metasploitable3-win2k8
```
![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/c04bcd6a-5b16-4077-8256-73068ef61c0e)

##### b. Initialisez et démarrez la machine virtuelle :

```powershell
vagrant init jbarnett-r7/metasploitable3-win2k8
vagrant up
```

![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/a3097e08-a0ff-4ee4-b6c5-11358819783e)


#### 4. Connexion à la machine virtuelle :

Utilisez les identifiants par défaut pour vous connecter à la machine virtuelle :

- **Utilisateur :** vagrant
- **Mot de passe :** vagrant

#### 4. Arrêtez les deux machines crées pour configurer les cartes en host-only adapter :

![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/425dfbcf-9c2c-45d9-bc35-08108a184216)


# Résumé
Voici les commandes essentielles pour installer Metasploitable3 sous Windows, présentées dans un format de script avec les commentaires pour chaque commande :

```plaintext
# Installer Chocolatey
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))

# Installer Git via Chocolatey
choco install git -y

# Télécharger et installer l'exécutable de Vagrant
https://www.vagrantup.com/
# Installer Packer via Chocolatey
choco install packer -y

# Cloner le repository Metasploitable3
git clone https://github.com/rapid7/metasploitable3.git
cd .\metasploitable3\

# Ajouter l'image à Vagrant
vagrant box add jbarnett-r7/metasploitable3-win2k8

# Initialiser et démarrer la VM
vagrant init jbarnett-r7/metasploitable3-win2k8
vagrant up

# Connexion à la machine virtuelle avec les identifiants par défaut
# Utilisateur : vagrant
# Mot de passe : vagrant
```



#  2 - Étape 2 - Configuration des cartes

- Vérifiez vos cartes host-only-adapter (parfois il faut fermer et réouvrir virtual box pour la mise à jour)
![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/02945df1-dfdc-4b47-bf84-a72d5d8433f5)

- Par exemple, vagrant a déscativé ma première carte et a crée une deuxième host-only adapter 2.
- Je supprime la carte host-only-adapter 2 et je réactive la première en coachant enable server dans DHCP Server. Récupérez l'adresse ( Dans mon cas, 172.28.128.2)

![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/0b8e03f8-b3e8-4417-a9fe-b1641bfa675c)
![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/b7e3acab-6b9b-4353-bfb1-b1090b20fddc)


- Dans la machine metasploitable ubuntu (on ignore la machine metasspoitable windows pour le moment ==­> la laisser éteinte) , nous choisissons le bridge adapter pour la première carte
  ![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/ab068404-272e-4599-9cae-d048920314d8)

- Pour la deuxième carte, nous choississons host-only adapter (le premier que nous avons gardé)

![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/9b2e115b-b2ec-494a-ad9e-72287c4f737c)


# Étape 3 - Ajout des machines (Ubuntu 2204) et configuration des cartes

- Démarrez une machine Ubuntu2204
- Créez un groupe spécifique pour vos deux machines par exemple Metasploitable3 et bougez les deux machines dans ce groupe
![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/94e6720c-43cf-442b-8e12-396b06779a1e)
- Configurez la machien ubuntu2204 : deux cartes
- Première carte : Bridge
- Deuxième carte : Host-Only-Adpater (même réseaux que Metasploitable)

  ![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/9059865a-ad62-4461-957c-dd02e4aa98d3)
  ![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/d26d1942-6d7b-4a62-b6e4-f82310cc2382)

  - Démarrez votre machine UbuntuDesktop2204 et remarquez qu'il n'y a pas d'adresses IP associé à la deuxième carte ????
  - Bon, dans mon cas, je suis chanceux et j'ai trouvé cette adresse 172.28.128.3
![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/731873c3-0565-467c-a638-e861347dad25)
![image](https://github.com/hrhouma/securite-logiciels-applications/assets/10111526/470d2055-0190-41d0-ab90-bcb69c65489c)

# Supposons que nous n'avons pas d'adresses associé à la deuxième carte enp0s8 ?
- Dans ce cas , appliquez ces manipulations !




